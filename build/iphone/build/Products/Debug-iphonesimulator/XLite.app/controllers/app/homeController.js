const postService = require('/services/postService');
const userService = require('/services/userService');

function loadHomeData(onSuccess, onError) {
  postService.fetchPosts((posts) => {
    userService.fetchUsers(posts.length, (users) => {
      // Merge each post with a user by index
      const merged = posts.map((post, idx) => {var _users$idx, _users$idx2;return {
          ...post,
          username: ((_users$idx = users[idx]) === null || _users$idx === void 0 ? void 0 : _users$idx.username) || `user${idx + 1}`,
          avatar: ((_users$idx2 = users[idx]) === null || _users$idx2 === void 0 ? void 0 : _users$idx2.avatar) ||
          'https://abs.twimg.com/sticky/default_profile_images/default_profile_400x400.png'
        };});
      onSuccess(merged);
    }, onError);
  }, onError);
}

module.exports = { loadHomeData };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsV0FBVyxHQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDcEQsTUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsdUJBQXVCLENBQUM7O0FBRXBELFNBQVNFLFlBQVlBLENBQUNDLFNBQVMsRUFBRUMsT0FBTyxFQUFFO0VBQ3RDTCxXQUFXLENBQUNNLFVBQVUsQ0FBQyxDQUFDQyxLQUFLLEtBQUs7SUFDOUJMLFdBQVcsQ0FBQ00sVUFBVSxDQUFDRCxLQUFLLENBQUNFLE1BQU0sRUFBRSxDQUFDQyxLQUFLLEtBQUs7TUFDNUM7TUFDQSxNQUFNQyxNQUFNLEdBQUdKLEtBQUssQ0FBQ0ssR0FBRyxDQUFDLENBQUNDLElBQUksRUFBRUMsR0FBRyxVQUFBQyxVQUFBLEVBQUFDLFdBQUEsUUFBTTtVQUNyQyxHQUFHSCxJQUFJO1VBQ1BJLFFBQVEsRUFBRSxFQUFBRixVQUFBLEdBQUFMLEtBQUssQ0FBQ0ksR0FBRyxDQUFDLGNBQUFDLFVBQUEsdUJBQVZBLFVBQUEsQ0FBWUUsUUFBUSxLQUFLLE9BQU1ILEdBQUcsR0FBRyxDQUFFLEVBQUM7VUFDbERJLE1BQU0sRUFBRSxFQUFBRixXQUFBLEdBQUFOLEtBQUssQ0FBQ0ksR0FBRyxDQUFDLGNBQUFFLFdBQUEsdUJBQVZBLFdBQUEsQ0FBWUUsTUFBTTtVQUN0QjtRQUNSLENBQUMsRUFBQyxDQUFDO01BQ0hkLFNBQVMsQ0FBQ08sTUFBTSxDQUFDO0lBQ3JCLENBQUMsRUFBRU4sT0FBTyxDQUFDO0VBQ2YsQ0FBQyxFQUFFQSxPQUFPLENBQUM7QUFDZjs7QUFFQWMsTUFBTSxDQUFDQyxPQUFPLEdBQUcsRUFBRWpCLFlBQVksQ0FBQyxDQUFDIiwibmFtZXMiOlsicG9zdFNlcnZpY2UiLCJyZXF1aXJlIiwidXNlclNlcnZpY2UiLCJsb2FkSG9tZURhdGEiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwiZmV0Y2hQb3N0cyIsInBvc3RzIiwiZmV0Y2hVc2VycyIsImxlbmd0aCIsInVzZXJzIiwibWVyZ2VkIiwibWFwIiwicG9zdCIsImlkeCIsIl91c2VycyRpZHgiLCJfdXNlcnMkaWR4MiIsInVzZXJuYW1lIiwiYXZhdGFyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FkaXRpc3VyeWF3YW5zaGkvdnNjb2RlL1VuaXF1ZSBTY2hvb2xzL1hMaXRlL1Jlc291cmNlcy9jb250cm9sbGVycy9hcHAiLCJzb3VyY2VzIjpbImhvbWVDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBvc3RTZXJ2aWNlID0gcmVxdWlyZSgnL3NlcnZpY2VzL3Bvc3RTZXJ2aWNlJyk7XG5jb25zdCB1c2VyU2VydmljZSA9IHJlcXVpcmUoJy9zZXJ2aWNlcy91c2VyU2VydmljZScpO1xuXG5mdW5jdGlvbiBsb2FkSG9tZURhdGEob25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgcG9zdFNlcnZpY2UuZmV0Y2hQb3N0cygocG9zdHMpID0+IHtcbiAgICAgICAgdXNlclNlcnZpY2UuZmV0Y2hVc2Vycyhwb3N0cy5sZW5ndGgsICh1c2VycykgPT4ge1xuICAgICAgICAgICAgLy8gTWVyZ2UgZWFjaCBwb3N0IHdpdGggYSB1c2VyIGJ5IGluZGV4XG4gICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBwb3N0cy5tYXAoKHBvc3QsIGlkeCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5wb3N0LFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2Vyc1tpZHhdPy51c2VybmFtZSB8fCBgdXNlciR7aWR4ICsgMX1gLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogdXNlcnNbaWR4XT8uYXZhdGFyIHx8XG4gICAgICAgICAgICAgICAgICAgICdodHRwczovL2Ficy50d2ltZy5jb20vc3RpY2t5L2RlZmF1bHRfcHJvZmlsZV9pbWFnZXMvZGVmYXVsdF9wcm9maWxlXzQwMHg0MDAucG5nJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgb25TdWNjZXNzKG1lcmdlZCk7XG4gICAgICAgIH0sIG9uRXJyb3IpO1xuICAgIH0sIG9uRXJyb3IpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgbG9hZEhvbWVEYXRhIH07XG4iXSwidmVyc2lvbiI6M30=
